# @xarunoba/ccoco ðŸ¥¥

![Static Badge](https://img.shields.io/badge/Made_with-%E2%9D%A4%EF%B8%8F-red?style=for-the-badge) ![NPM License](https://img.shields.io/npm/l/%40xarunoba%2Fccoco?style=for-the-badge)
![NPM Version](https://img.shields.io/npm/v/%40xarunoba%2Fccoco?style=for-the-badge&logo=npm)

**`ccoco`** â€” change config on checkout

Change your configurations on checkout for easy config environment change. Integrate with git hooks.

## Why

My team didn't want to populate the `package.json` too much with scripts so I created a tool that can easily replace the main config files whenever a branch changed. `ccoco` fixes this issue by automatically changing your main config files per branch name. This tool is not only limited to Node.js thanks to the rewrite to Go.

## Installation

### Download Binary

Download from the Release page, add it to your PATH, and then initialize `ccoco` in your project directory.

```bash
ccoco init
```

### Go Install

```bash
go install github.com/xarunoba/ccoco@latest
ccoco init
```

### npm/pnpm/yarn

Coming soon!

### .gitignore

Please add `.ccoco` in your `.gitignore` file.

## Usage

Initialize `ccoco`

```bash
ccoco init
```

Generate per-branch config files based on your git branches

```bash
ccoco generate .env
# ccoco generate someconfig.yml .env .env.production something.toml
```

Inject `ccoco` in your post-checkout git hook

```bash
ccoco githook
```

Manually run ccoco (when not using the git hook)

```bash
ccoco run
```

### Using sub-branches

`ccoco` will recursively check if a sub-branch has a config file until it reaches the "root" of the sub-branch.

##### Example

1. Branch `nested/one/two` does not have a config file created.
2. `ccoco` will recursively check for the config file existing in `nested/one` up until the root `nested` and will fail if it cannot find one.

## Configuring `ccoco`

`ccoco` can be configured via `ccoco.config.json`

```json
{
  "files": [".env"], // the file that will be generated by ccoco generate
  "filesDir": "." // this is the directory where the config file will be placed when switched every branch change.
}
```
